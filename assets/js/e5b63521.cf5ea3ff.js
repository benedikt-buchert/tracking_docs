"use strict";(globalThis.webpackChunkdemo=globalThis.webpackChunkdemo||[]).push([[318],{333:(e,t,i)=>{i.d(t,{A:()=>r});i(6540);var s=i(5535),n=i(4848);function r({schema:e}){return(0,n.jsxs)("details",{className:"schema-json-viewer",children:[(0,n.jsx)("summary",{children:"View Raw JSON Schema"}),(0,n.jsx)(s.A,{language:"json",children:JSON.stringify(e,null,2)})]})}},5471:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>u,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"events/complex-event","title":"Complex Event with Validation Constraints","description":"A generic event demonstrating various validation constraints and recursive documentation capabilities.","source":"@site/versioned_docs/version-1.1.1/events/complex-event.mdx","sourceDirName":"events","slug":"/events/complex-event","permalink":"/events/complex-event","draft":false,"unlisted":false,"editUrl":"https://github.com/benedikt-buchert/tracking_docs/edit/main/demo/static/schemas/1.1.1/complex-event.json","tags":[],"version":"1.1.1","frontMatter":{"title":"Complex Event with Validation Constraints","description":"A generic event demonstrating various validation constraints and recursive documentation capabilities.","sidebar_label":"Complex Event with Validation Constraints","custom_edit_url":"https://github.com/benedikt-buchert/tracking_docs/edit/main/demo/static/schemas/1.1.1/complex-event.json"},"sidebar":"tutorialSidebar","previous":{"title":"Add to Cart Event","permalink":"/events/add-to-cart-event"},"next":{"title":"Purchase Event","permalink":"/events/purchase-event"}}');var n=i(4848),r=i(3023),a=i(5980),o=i(333);const c={title:"Complex Event with Validation Constraints",description:"A generic event demonstrating various validation constraints and recursive documentation capabilities.",sidebar_label:"Complex Event with Validation Constraints",custom_edit_url:"https://github.com/benedikt-buchert/tracking_docs/edit/main/demo/static/schemas/1.1.1/complex-event.json"},p="Complex Event with Validation Constraints",m={},d=[];function l(e){const t={h1:"h1",header:"header",p:"p",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"complex-event-with-validation-constraints",children:"Complex Event with Validation Constraints"})}),"\n",(0,n.jsx)(t.p,{children:"A generic event demonstrating various validation constraints and recursive documentation capabilities."}),"\n",(0,n.jsx)(a.A,{schema:{$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://tracking-docs-demo.buchert.digital/schemas/1.1.1/complex-event.json",title:"Complex Event with Validation Constraints",description:"A generic event demonstrating various validation constraints and recursive documentation capabilities.",type:"object",required:["event","number_constraints","string_constraints","user_data"],$defs:{strictObject:{type:"object",propertyNames:{maxLength:40,pattern:"^[a-z0-9_]+$"},additionalProperties:{anyOf:[{$ref:"#/allOf/0/$defs/strictObject"},{type:"array",items:{$ref:"#/allOf/0/$defs/strictObject"}},{not:{type:"object"}}]}}},$ref:"#/allOf/0/$defs/strictObject",properties:{event:{type:"string",const:"user_update",description:"The event name.",examples:["user_update"]},timestamp:{type:"integer",description:"Unix timestamp of the event.",examples:[16788922]},user_data:{type:"object",description:"Container for user information.",required:["user_id","attributes"],"x-gtm-clear":!0,properties:{user_id:{type:"string",description:"Unique User ID.",examples:["U_999"]},is_active:{type:"boolean",description:"Status of the user.",examples:[!0]},attributes:{type:"object",description:"Nested generic attributes.",properties:{segment:{type:"string",description:"Marketing segment.",examples:["premium"]},score:{type:"number",description:"Engagement score.",examples:[95]}}},addresses:{type:"array",description:"List of user addresses.",items:{type:"object",required:["city","zip"],properties:{street:{type:"string",examples:["123 Main St"]},city:{type:"string",examples:["New York"]},zip:{type:"string",examples:["10001"]}}}}}},string_constraints:{type:"string",description:"A string with various constraints.",minLength:2,maxLength:10,pattern:"^[a-z]+$",format:"hostname",examples:["example"]},number_constraints:{type:"number",description:"A number with various constraints.",minimum:10,maximum:100,multipleOf:5,examples:[50]},exclusive_number_constraints:{type:"number",description:"A number with exclusive constraints.",exclusiveMinimum:10,exclusiveMaximum:100,examples:[50]},array_constraints:{type:"array",description:"An array with various constraints.",minItems:1,maxItems:5,uniqueItems:!0,examples:[["a","b"]],items:{type:"string"}},contains_array_constraints:{type:"array",description:"An array with contains constraints.",contains:{type:"integer"},minContains:1,maxContains:2,examples:[[1,"text",2]]},object_constraints:{type:"object",description:"An object with various constraints.",minProperties:1,maxProperties:3,propertyNames:{pattern:"^[a-z0-9_]+$"},examples:[{prop_a:"some_value",prop_b:"another_value"}],additionalProperties:!1,properties:{prop_a:{type:"string",examples:["some_value"]},prop_b:{type:"string",examples:["another_value"]}}},dependent_required_constraint:{type:"object",description:"An object with dependent required properties.",dependentRequired:{credit_card:["billing_address"]},examples:[{credit_card:0x462d53c8abac0,billing_address:"123 Billing Address, Anytown, USA"}],properties:{credit_card:{type:"number",examples:[0x462d53c8abac0]},billing_address:{type:"string",examples:["123 Billing Address, Anytown, USA"]}}},enum_constraint:{type:"string",description:"A property with an enum constraint.",enum:["admin","editor","viewer"],examples:["admin"]},const_constraint:{type:"string",description:"A property that must have a constant value.",const:"must_be_this",examples:["must_be_this"]},ecommerce:{type:"object",description:"Ecommerce related data.","x-gtm-clear":!0}}}}),"\n",(0,n.jsx)(o.A,{schema:{$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://tracking-docs-demo.buchert.digital/schemas/1.1.1/complex-event.json",title:"Complex Event with Validation Constraints",description:"A generic event demonstrating various validation constraints and recursive documentation capabilities.",type:"object",required:["event","user_data","string_constraints","number_constraints"],allOf:[{$ref:"./components/dataLayer.json"}],properties:{event:{type:"string",const:"user_update",description:"The event name.",examples:["user_update"]},timestamp:{type:"integer",description:"Unix timestamp of the event.",examples:[16788922]},user_data:{type:"object",description:"Container for user information.",required:["user_id","attributes"],properties:{user_id:{type:"string",description:"Unique User ID.",examples:["U_999"]},is_active:{type:"boolean",description:"Status of the user.",examples:[!0]},attributes:{type:"object",description:"Nested generic attributes.",properties:{segment:{type:"string",description:"Marketing segment.",examples:["premium"]},score:{type:"number",description:"Engagement score.",examples:[95]}}},addresses:{type:"array",description:"List of user addresses.",items:{type:"object",required:["city","zip"],properties:{street:{type:"string",examples:["123 Main St"]},city:{type:"string",examples:["New York"]},zip:{type:"string",examples:["10001"]}}}}}},string_constraints:{type:"string",description:"A string with various constraints.",minLength:2,maxLength:10,pattern:"^[a-z]+$",format:"hostname",examples:["example"]},number_constraints:{type:"number",description:"A number with various constraints.",minimum:10,maximum:100,multipleOf:5,examples:[50]},exclusive_number_constraints:{type:"number",description:"A number with exclusive constraints.",exclusiveMinimum:10,exclusiveMaximum:100,examples:[50]},array_constraints:{type:"array",description:"An array with various constraints.",minItems:1,maxItems:5,uniqueItems:!0,items:{type:"string"},examples:[["a","b"]]},contains_array_constraints:{type:"array",description:"An array with contains constraints.",contains:{type:"integer"},minContains:1,maxContains:2,examples:[[1,"text",2]]},object_constraints:{type:"object",description:"An object with various constraints.",minProperties:1,maxProperties:3,additionalProperties:!1,propertyNames:{pattern:"^[a-z0-9_]+$"},properties:{prop_a:{type:"string",examples:["some_value"]},prop_b:{type:"string",examples:["another_value"]}},examples:[{prop_a:"some_value",prop_b:"another_value"}]},dependent_required_constraint:{type:"object",description:"An object with dependent required properties.",dependentRequired:{credit_card:["billing_address"]},properties:{credit_card:{type:"number",examples:[0x462d53c8abac0]},billing_address:{type:"string",examples:["123 Billing Address, Anytown, USA"]}},examples:[{credit_card:0x462d53c8abac0,billing_address:"123 Billing Address, Anytown, USA"}]},enum_constraint:{type:"string",description:"A property with an enum constraint.",enum:["admin","editor","viewer"],examples:["admin"]},const_constraint:{type:"string",description:"A property that must have a constant value.",const:"must_be_this",examples:["must_be_this"]}}}})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},5980:(e,t,i)=>{i.d(t,{A:()=>v});var s=i(6540),n=i(1381),r=i(5535);const a=e=>{const t=e=>{if(!e)return;if(e.examples&&e.examples.length)return e.examples[0];if(void 0!==e.const)return e.const;if(void 0!==e.default)return e.default;const i=Array.isArray(e.type)?e.type[0]:e.type;if("object"!==i){if("array"!==i)switch(i){case"string":return"";case"integer":case"number":return 0;case"boolean":return!1;default:return}else if(e.items){const i=t(e.items);if(void 0!==i)return[i]}}else if(e.properties){const i={};if(Object.entries(e.properties).forEach(([e,s])=>{const n=t(s);void 0!==n&&(i[e]=n)}),0===Object.keys(i).length)return;return i}};if(e&&e.examples&&e.examples.length){const t=e.examples[0];if("object"==typeof t&&null!==t)return t}if(e&&e.properties){const i={};return Object.entries(e.properties).forEach(([e,s])=>{const n=t(s);void 0!==n&&(i[e]=n)}),i}return{}};var o=i(4848);function c({schema:e}){const t=p(e||{}),i=a(e||{});let s="";const n=t.filter(e=>e in i);if(n.length>0){const e={};n.forEach(t=>{e[t]=null}),s+=`window.dataLayer.push(${JSON.stringify(e,null,2)});\n`}return s+=`window.dataLayer.push(${JSON.stringify(i,null,2)});`,(0,o.jsx)(r.A,{language:"javascript",children:s})}const p=e=>e&&e.properties?Object.entries(e.properties).filter(([e,t])=>!0===t["x-gtm-clear"]).map(([e])=>e):[];var m=i(1750);const d=({propertyKey:e,prop:t,requiredList:i,getConstraints:n})=>{const r=i.includes(e),a=n(t,r),c=t.properties||t.items&&t.items.properties,p=c&&Object.keys(c).length>0,d="object"===t.type,l="array"===t.type&&t.items&&"object"===t.items.type;if((d||l)&&!p)return null;const u=Math.max(1,a.length),[x,...h]=a;return(0,o.jsxs)(s.Fragment,{children:[(0,o.jsxs)("tr",{className:(0,m.A)(r&&"required-row"),children:[(0,o.jsxs)("td",{rowSpan:u,children:[(0,o.jsx)("strong",{children:e}),p&&(0,o.jsx)("span",{style:{fontSize:"0.8em",marginLeft:"5px"},children:"\u2935"})]}),(0,o.jsx)("td",{rowSpan:u,children:(0,o.jsx)("code",{children:(g=t.type,Array.isArray(g)?g.join(" | "):g)})}),(0,o.jsx)("td",{children:x&&(0,o.jsx)("code",{className:(0,m.A)("constraint-code","required"===x&&"required"),children:x})}),(0,o.jsx)("td",{rowSpan:u,children:(y=t.examples,y?y.map(e=>"object"==typeof e?JSON.stringify(e):e).join(", "):"")}),(0,o.jsx)("td",{rowSpan:u,children:t.description||""})]}),h.map((t,i)=>(0,o.jsx)("tr",{className:(0,m.A)(r&&"required-row"),children:(0,o.jsx)("td",{children:(0,o.jsx)("code",{className:(0,m.A)("constraint-code","required"===t&&"required"),children:t})})},`${e}-constraint-${i}`))]});var y,g};function l(){return(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{width:"20%",children:"Property"}),(0,o.jsx)("th",{width:"15%",children:"Type"}),(0,o.jsx)("th",{width:"25%",children:"Constraints"}),(0,o.jsx)("th",{width:"15%",children:"Examples"}),(0,o.jsx)("th",{children:"Description"})]})})}const u=({properties:e,requiredList:t=[],level:i=0,getConstraints:n})=>(0,o.jsx)(o.Fragment,{children:Object.entries(e).map(([e,r])=>{const a=r.properties||r.items&&r.items.properties,c=a&&Object.keys(a).length>0;return(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)(d,{propertyKey:e,prop:r,requiredList:t,level:i,getConstraints:n}),c&&(0,o.jsx)("tr",{children:(0,o.jsxs)("td",{colSpan:"5",className:"nested-table-container",children:[(0,o.jsx)("strong",{children:"array"===r.type?`${e} [ ]`:`${e} { }`}),(0,o.jsxs)("table",{style:{width:"100%",marginTop:"5px"},children:[(0,o.jsx)(l,{}),(0,o.jsx)("tbody",{children:(0,o.jsx)(u,{properties:"object"===r.type?r.properties:r.items.properties,requiredList:"object"===r.type?r.required||[]:r.items.required||[],level:i+1,getConstraints:n})})]})]})},`${e}-nested`)]},e)})}),x=u,h={minLength:e=>`minLength: ${e}`,maxLength:e=>`maxLength: ${e}`,minimum:e=>`minimum: ${e}`,maximum:e=>`maximum: ${e}`,exclusiveMinimum:e=>`exclusiveMinimum: ${e}`,exclusiveMaximum:e=>`exclusiveMaximum: ${e}`,minItems:e=>`minItems: ${e}`,maxItems:e=>`maxItems: ${e}`,minProperties:e=>`minProperties: ${e}`,maxProperties:e=>`maxProperties: ${e}`,multipleOf:e=>`multipleOf: ${e}`,format:e=>`format: ${e}`,minContains:e=>`minContains: ${e}`,maxContains:e=>`maxContains: ${e}`,pattern:e=>`pattern: /${e}/`,uniqueItems:e=>e?"uniqueItems: true":null,additionalProperties:e=>!1===e?"additionalProperties: false":null,propertyNames:e=>`propertyNames: ${JSON.stringify(e)}`,dependentRequired:e=>`dependentRequired: ${Object.entries(e).map(([e,t])=>`${e} -> [${t.join(", ")}]`).join("; ")}`,contains:e=>`contains: ${JSON.stringify(e)}`,enum:e=>`enum: [${e.join(", ")}]`,const:e=>`const: ${JSON.stringify(e)}`},y=(e,t)=>{const i=[];t&&i.push("required");for(const s in h)if(void 0!==e[s]){const t=(0,h[s])(e[s]);t&&i.push(t)}return i};function g({schema:e}){return(0,o.jsxs)("table",{children:[(0,o.jsx)(l,{}),(0,o.jsx)("tbody",{children:(0,o.jsx)(x,{properties:e.properties,requiredList:e.required,getConstraints:y})})]})}function v({schema:e}){return(0,o.jsxs)("div",{children:[(0,o.jsx)(n.A,{as:"h2",children:"DataLayer Example"}),(0,o.jsx)(c,{schema:e}),(0,o.jsx)(n.A,{as:"h2",children:"Event Properties"}),(0,o.jsx)(g,{schema:e})]})}}}]);