"use strict";(globalThis.webpackChunkdemo=globalThis.webpackChunkdemo||[]).push([[478],{333:(e,t,i)=>{i.d(t,{A:()=>n});i(6540);var s=i(5535),r=i(4848);function n({schema:e}){return(0,r.jsxs)("details",{className:"schema-json-viewer",children:[(0,r.jsx)("summary",{children:"View Raw JSON Schema"}),(0,r.jsx)(s.A,{language:"json",children:JSON.stringify(e,null,2)})]})}},5509:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>p,default:()=>l,frontMatter:()=>c,metadata:()=>s,toc:()=>m});const s=JSON.parse('{"id":"events/purchase-event","title":"Purchase Event","description":"A purchase event fires when a user completes a purchase. Based on Google Analytics 4 ecommerce event specifications.","source":"@site/versioned_docs/version-1.1.1/events/purchase-event.mdx","sourceDirName":"events","slug":"/events/purchase-event","permalink":"/events/purchase-event","draft":false,"unlisted":false,"editUrl":"https://github.com/benedikt-buchert/tracking_docs/edit/main/demo/static/schemas/1.1.1/purchase-event.json","tags":[],"version":"1.1.1","frontMatter":{"title":"Purchase Event","description":"A purchase event fires when a user completes a purchase. Based on Google Analytics 4 ecommerce event specifications.","sidebar_label":"Purchase Event","custom_edit_url":"https://github.com/benedikt-buchert/tracking_docs/edit/main/demo/static/schemas/1.1.1/purchase-event.json"},"sidebar":"tutorialSidebar","previous":{"title":"Complex Event with Validation Constraints","permalink":"/events/complex-event"}}');var r=i(4848),n=i(3023),a=i(5980),o=i(333);const c={title:"Purchase Event",description:"A purchase event fires when a user completes a purchase. Based on Google Analytics 4 ecommerce event specifications.",sidebar_label:"Purchase Event",custom_edit_url:"https://github.com/benedikt-buchert/tracking_docs/edit/main/demo/static/schemas/1.1.1/purchase-event.json"},p="Purchase Event",d={},m=[];function h(e){const t={h1:"h1",header:"header",p:"p",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"purchase-event",children:"Purchase Event"})}),"\n",(0,r.jsx)(t.p,{children:"A purchase event fires when a user completes a purchase. Based on Google Analytics 4 ecommerce event specifications."}),"\n",(0,r.jsx)(a.A,{schema:{$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://tracking-docs-demo.buchert.digital/schemas/1.1.1/purchase-event.json",title:"Purchase Event",description:"A purchase event fires when a user completes a purchase. Based on Google Analytics 4 ecommerce event specifications.",type:"object",required:["event"],$defs:{strictObject:{type:"object",propertyNames:{maxLength:40,pattern:"^[a-z0-9_]+$"},additionalProperties:{anyOf:[{$ref:"#/allOf/0/$defs/strictObject"},{type:"array",items:{$ref:"#/allOf/0/$defs/strictObject"}},{not:{type:"object"}}]}}},$ref:"#/allOf/0/$defs/strictObject",properties:{event:{type:"string",const:"purchase",description:"The name of the event indicating a purchase has occurred."},ecommerce:{type:"object",description:"Ecommerce related data for the purchase event.",required:["transaction_id","value","currency","items"],"x-gtm-clear":!0,properties:{transaction_id:{type:"string",description:"The unique ID of a transaction. The transaction_id parameter helps avoid duplicate transaction recording.",examples:["T_12345","TXN_20231205_001"]},value:{type:"number",description:"The monetary value of the event. Set value to the sum of (price * quantity) for all items in items.",examples:[72.05,99.99,150.5]},currency:{type:"string",description:"The currency of the items in ISO 4217 three-letter format. Required when value is set.",minLength:3,maxLength:3,examples:["USD","EUR","GBP"]},coupon:{type:"string",description:"The coupon/code associated with the event. Event-level and item-level coupon parameters are independent.",examples:["SUMMER_SALE","WELCOME15"]},shipping:{type:"number",description:"The shipping cost associated with the transaction.",examples:[5.99,10,0]},tax:{type:"number",description:"The tax associated with the transaction.",examples:[3.6,7.5,0]},customer_type:{type:"string",enum:["new","returning"],description:"Whether this is from a new or returning customer. 'new' = customer with no purchase in the specified time window (default 540 days). 'returning' = customer with purchase in the specified time window.",examples:["new","returning"]},items:{type:"array",description:"The products purchased in the transaction.",minItems:1,items:{$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://tracking-docs-demo.buchert.digital/schemas/components/product.json",title:"A Product",description:"A product object representing an item for use within a purchase event, based on Google Analytics 4 ecommerce event specifications.",type:"object",required:[],properties:{item_id:{type:"string",description:"The ID of the item. Either item_id or item_name is required.",examples:["SKU_12345","PROD_98765"]},item_name:{type:"string",description:"The name of the item. Either item_id or item_name is required.",examples:["Stan and Friends Tee","Blue Running Shoes"]},affiliation:{type:"string",description:"A product affiliation to indicate a supplier or store. Note: affiliation is only available at the item level.",examples:["Google Merchandise Store","Nike Store"]},coupon:{type:"string",description:"The coupon name/code associated with the item. Coupon parameters at event and item levels are independent.",examples:["SUMMER_FUN","WELCOME20","SAVE10"]},discount:{type:"number",description:"The monetary value of the discount per unit applied to the item.",examples:[2.22,5,10.5]},index:{type:"number",description:"The index or position of the item in a list.",examples:[0,1,2]},item_brand:{type:"string",description:"The brand of the item.",examples:["Google","Nike","Adidas"]},item_category:{type:"string",description:"The category of the item. If used as part of a category hierarchy or taxonomy, this is the first category.",examples:["Apparel","Footwear","Electronics"]},item_category2:{type:"string",description:"The second category hierarchy or additional taxonomy of the item.",examples:["Adult","Women","Men"]},item_category3:{type:"string",description:"The third category hierarchy or additional taxonomy of the item.",examples:["Shirts","Shoes","Boots"]},item_category4:{type:"string",description:"The fourth category hierarchy or additional taxonomy of the item.",examples:["Crew","Running","Casual"]},item_category5:{type:"string",description:"The fifth category hierarchy or additional taxonomy of the item.",examples:["Short sleeve","Long distance","Lightweight"]},item_list_id:{type:"string",description:"The ID of the list in which the item was presented to the user. If set, item_list_id at the event level is ignored. If not set, item_list_id at the event level is used if available.",examples:["related_products","search_results","recommendations"]},item_list_name:{type:"string",description:"The name of the list in which the item was presented to the user. If set, item_list_name at the event level is ignored. If not set, item_list_name at the event level is used if available.",examples:["Related Products","Search Results","Recommended Items"]},item_variant:{type:"string",description:"The item variant or unique code or description for additional item details/options.",examples:["green","Blue Size 10","M-Black"]},location_id:{type:"string",description:"The physical location associated with the item, such as the location of a brick-and-mortar store. It is recommended to use the Google Place ID that corresponds to the associated item. A custom location ID can also be used. Note: location_id is only available at the item level.",examples:["ChIJIQBpAG2ahYAR_6128GcTUEo","store_123","location_sf"]},price:{type:"number",description:"The price of the item in the specified currency unit. If a discount is applied to the item, set price to the reduced per-unit price and provide the per-unit price discount in the discount parameter.",examples:[10.01,21.01,89.99]},quantity:{type:"number",description:"The item quantity. If not set, quantity is set to 1.",examples:[1,2,3]},promotion_id:{type:"string",description:"The ID of the promotion associated with the item.",examples:["P_12345","PROMO_001"]},promotion_name:{type:"string",description:"The name of the promotion associated with the item.",examples:["Summer Sale","Black Friday","Flash Deal"]},creative_name:{type:"string",description:"The name of the promotion creative.",examples:["summer_banner2","holiday_email_v1"]},creative_slot:{type:"string",description:"The name of the creative slot associated with the item.",examples:["featured_app_1","top_banner","sidebar"]},google_business_vertical:{type:"string",description:"The business vertical for the item (e.g., 'retail').",examples:["retail","ecommerce"]}}}}}},user_data:{type:"object",description:"User related data.","x-gtm-clear":!0}}}}),"\n",(0,r.jsx)(o.A,{schema:{$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://tracking-docs-demo.buchert.digital/schemas/1.1.1/purchase-event.json",title:"Purchase Event",description:"A purchase event fires when a user completes a purchase. Based on Google Analytics 4 ecommerce event specifications.",type:"object",allOf:[{$ref:"./components/dataLayer.json"}],properties:{event:{type:"string",const:"purchase",description:"The name of the event indicating a purchase has occurred."},ecommerce:{type:"object",description:"Ecommerce related data for the purchase event.",properties:{transaction_id:{type:"string",description:"The unique ID of a transaction. The transaction_id parameter helps avoid duplicate transaction recording.",examples:["T_12345","TXN_20231205_001"]},value:{type:"number",description:"The monetary value of the event. Set value to the sum of (price * quantity) for all items in items.",examples:[72.05,99.99,150.5]},currency:{type:"string",description:"The currency of the items in ISO 4217 three-letter format. Required when value is set.",minLength:3,maxLength:3,examples:["USD","EUR","GBP"]},coupon:{type:"string",description:"The coupon/code associated with the event. Event-level and item-level coupon parameters are independent.",examples:["SUMMER_SALE","WELCOME15"]},shipping:{type:"number",description:"The shipping cost associated with the transaction.",examples:[5.99,10,0]},tax:{type:"number",description:"The tax associated with the transaction.",examples:[3.6,7.5,0]},customer_type:{type:"string",enum:["new","returning"],description:"Whether this is from a new or returning customer. 'new' = customer with no purchase in the specified time window (default 540 days). 'returning' = customer with purchase in the specified time window.",examples:["new","returning"]},items:{type:"array",description:"The products purchased in the transaction.",minItems:1,items:{$ref:"./components/product.json"}}},required:["transaction_id","value","currency","items"]}}}})]})}function l(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},5980:(e,t,i)=>{i.d(t,{A:()=>x});var s=i(6540),r=i(1381),n=i(5535);const a=e=>{const t=e=>{if(!e)return;if(e.examples&&e.examples.length)return e.examples[0];if(void 0!==e.const)return e.const;if(void 0!==e.default)return e.default;const i=Array.isArray(e.type)?e.type[0]:e.type;if("object"!==i){if("array"!==i)switch(i){case"string":return"";case"integer":case"number":return 0;case"boolean":return!1;default:return}else if(e.items){const i=t(e.items);if(void 0!==i)return[i]}}else if(e.properties){const i={};if(Object.entries(e.properties).forEach(([e,s])=>{const r=t(s);void 0!==r&&(i[e]=r)}),0===Object.keys(i).length)return;return i}};if(e&&e.examples&&e.examples.length){const t=e.examples[0];if("object"==typeof t&&null!==t)return t}if(e&&e.properties){const i={};return Object.entries(e.properties).forEach(([e,s])=>{const r=t(s);void 0!==r&&(i[e]=r)}),i}return{}};var o=i(4848);function c({schema:e}){const t=p(e||{}),i=a(e||{});let s="";const r=t.filter(e=>e in i);if(r.length>0){const e={};r.forEach(t=>{e[t]=null}),s+=`window.dataLayer.push(${JSON.stringify(e,null,2)});\n`}return s+=`window.dataLayer.push(${JSON.stringify(i,null,2)});`,(0,o.jsx)(n.A,{language:"javascript",children:s})}const p=e=>e&&e.properties?Object.entries(e.properties).filter(([e,t])=>!0===t["x-gtm-clear"]).map(([e])=>e):[];var d=i(1750);const m=({propertyKey:e,prop:t,requiredList:i,getConstraints:r})=>{const n=i.includes(e),a=r(t,n),c=t.properties||t.items&&t.items.properties,p=c&&Object.keys(c).length>0,m="object"===t.type,h="array"===t.type&&t.items&&"object"===t.items.type;if((m||h)&&!p)return null;const l=Math.max(1,a.length),[u,...y]=a;return(0,o.jsxs)(s.Fragment,{children:[(0,o.jsxs)("tr",{className:(0,d.A)(n&&"required-row"),children:[(0,o.jsxs)("td",{rowSpan:l,children:[(0,o.jsx)("strong",{children:e}),p&&(0,o.jsx)("span",{style:{fontSize:"0.8em",marginLeft:"5px"},children:"\u2935"})]}),(0,o.jsx)("td",{rowSpan:l,children:(0,o.jsx)("code",{children:(g=t.type,Array.isArray(g)?g.join(" | "):g)})}),(0,o.jsx)("td",{children:u&&(0,o.jsx)("code",{className:(0,d.A)("constraint-code","required"===u&&"required"),children:u})}),(0,o.jsx)("td",{rowSpan:l,children:(f=t.examples,f?f.map(e=>"object"==typeof e?JSON.stringify(e):e).join(", "):"")}),(0,o.jsx)("td",{rowSpan:l,children:t.description||""})]}),y.map((t,i)=>(0,o.jsx)("tr",{className:(0,d.A)(n&&"required-row"),children:(0,o.jsx)("td",{children:(0,o.jsx)("code",{className:(0,d.A)("constraint-code","required"===t&&"required"),children:t})})},`${e}-constraint-${i}`))]});var f,g};function h(){return(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{width:"20%",children:"Property"}),(0,o.jsx)("th",{width:"15%",children:"Type"}),(0,o.jsx)("th",{width:"25%",children:"Constraints"}),(0,o.jsx)("th",{width:"15%",children:"Examples"}),(0,o.jsx)("th",{children:"Description"})]})})}const l=({properties:e,requiredList:t=[],level:i=0,getConstraints:r})=>(0,o.jsx)(o.Fragment,{children:Object.entries(e).map(([e,n])=>{const a=n.properties||n.items&&n.items.properties,c=a&&Object.keys(a).length>0;return(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)(m,{propertyKey:e,prop:n,requiredList:t,level:i,getConstraints:r}),c&&(0,o.jsx)("tr",{children:(0,o.jsxs)("td",{colSpan:"5",className:"nested-table-container",children:[(0,o.jsx)("strong",{children:"array"===n.type?`${e} [ ]`:`${e} { }`}),(0,o.jsxs)("table",{style:{width:"100%",marginTop:"5px"},children:[(0,o.jsx)(h,{}),(0,o.jsx)("tbody",{children:(0,o.jsx)(l,{properties:"object"===n.type?n.properties:n.items.properties,requiredList:"object"===n.type?n.required||[]:n.items.required||[],level:i+1,getConstraints:r})})]})]})},`${e}-nested`)]},e)})}),u=l,y={minLength:e=>`minLength: ${e}`,maxLength:e=>`maxLength: ${e}`,minimum:e=>`minimum: ${e}`,maximum:e=>`maximum: ${e}`,exclusiveMinimum:e=>`exclusiveMinimum: ${e}`,exclusiveMaximum:e=>`exclusiveMaximum: ${e}`,minItems:e=>`minItems: ${e}`,maxItems:e=>`maxItems: ${e}`,minProperties:e=>`minProperties: ${e}`,maxProperties:e=>`maxProperties: ${e}`,multipleOf:e=>`multipleOf: ${e}`,format:e=>`format: ${e}`,minContains:e=>`minContains: ${e}`,maxContains:e=>`maxContains: ${e}`,pattern:e=>`pattern: /${e}/`,uniqueItems:e=>e?"uniqueItems: true":null,additionalProperties:e=>!1===e?"additionalProperties: false":null,propertyNames:e=>`propertyNames: ${JSON.stringify(e)}`,dependentRequired:e=>`dependentRequired: ${Object.entries(e).map(([e,t])=>`${e} -> [${t.join(", ")}]`).join("; ")}`,contains:e=>`contains: ${JSON.stringify(e)}`,enum:e=>`enum: [${e.join(", ")}]`,const:e=>`const: ${JSON.stringify(e)}`},f=(e,t)=>{const i=[];t&&i.push("required");for(const s in y)if(void 0!==e[s]){const t=(0,y[s])(e[s]);t&&i.push(t)}return i};function g({schema:e}){return(0,o.jsxs)("table",{children:[(0,o.jsx)(h,{}),(0,o.jsx)("tbody",{children:(0,o.jsx)(u,{properties:e.properties,requiredList:e.required,getConstraints:f})})]})}function x({schema:e}){return(0,o.jsxs)("div",{children:[(0,o.jsx)(r.A,{as:"h2",children:"DataLayer Example"}),(0,o.jsx)(c,{schema:e}),(0,o.jsx)(r.A,{as:"h2",children:"Event Properties"}),(0,o.jsx)(g,{schema:e})]})}}}]);